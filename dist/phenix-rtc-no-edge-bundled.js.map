{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d73880bbfaa7d09ef050","webpack:///../~/phenix-web-lodash-light/src/index.js","webpack:///../~/phenix-web-assert/src/index.js","webpack:///../~/phenix-web-detect-browser/src/index.js","webpack:///../~/phenix-web-observable/src/Observable.js","webpack:///../~/phenix-web-observable/src/index.js","webpack:///./rtc/PhenixVideo.js","webpack:///./rtc/WaitFor.js","webpack:///./rtc/RTCAdapter.js","webpack:///./rtc/exportGlobal.js","webpack:///../~/phenix-web-assert/src/assert.js","webpack:///../~/phenix-web-detect-browser/src/detectBrowser.js","webpack:///../~/phenix-web-disposable/src/Disposable.js","webpack:///../~/phenix-web-disposable/src/DisposableList.js","webpack:///../~/phenix-web-disposable/src/index.js","webpack:///../~/phenix-web-lodash-light/src/LodashLight.js","webpack:///../~/phenix-web-observable/src/ObservableArray.js","webpack:///../~/phenix-web-observable/src/ObservableMonitor.js","webpack:///../~/webpack/buildin/global.js","webpack:///../~/webrtc-adapter/out/adapter_no_edge.js","webpack:///./main.js","webpack:///./rtc/PhenixRTC.js","webpack:///./rtc/WebRTC.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACrBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACnBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACnBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACvLD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;AC3BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sEAAsE,qBAAqB,sBAAsB;AACjH,uCAAuC,uBAAuB;AAC9D,8CAA8C,4BAA4B;AAC1E,0CAA0C,0BAA0B;;AAEpE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2DAA2D;AAC3D;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8DAA8D;AAC9D;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B,sBAAsB;AACrD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA,uBAAuB,mBAAmB;AAC1C;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb,oCAAoC;;AAEpC;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gCAAgC;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC1WD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4DAA4D;AAC5D;AACA,aAAa,kCAAkC;AAC/C;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACpFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC3GD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACzBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC/ID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA,2CAA2C;AAC3C;;AAEA,4EAA4E;AAC5E;;AAEA;AACA,6FAA6F;AAC7F;AACA;AACA,iBAAiB,gEAAgE;AACjF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,6DAA6D;AAC7D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACtFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC1CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACjDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA,qG;;;;;;ACvBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,uBAAuB,uBAAuB;AAC9C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,uBAAuB,iBAAiB;AACxC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,uBAAuB,iBAAiB;AACxC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA,uBAAuB,+BAA+B;AACtD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,uBAAuB;AAC9C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACrsBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACrGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;ACvDD;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;0DCpBA,yBAAa,SAA2D,mBAAmB,gDAAgD,aAAa,KAAK,MAAM,gCAAgC,SAAS,qCAAqC,SAAS,mCAAmC,OAAO,KAAK,OAAO,iBAAiB,aAAa,0BAA0B,0BAA0B,gBAAgB,UAAU,UAAU,0CAA0C,8BAAwB,0BAAoB,8CAA8C,kCAAkC,YAAY,YAAY,mCAAmC,iBAAiB,gBAAgB,sBAAsB,oBAAoB,0CAA0C,YAAY,WAAW,YAAY,SAAS,GAAG;;AAE3yB,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iCAAiC,sBAAsB;;AAEvD,CAAC,qIAAqI;AACtI,CAAC,EAAE,yBAAyB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC,EAAE,8GAA8G;;AAEjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf,4BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA,+DAA+D;AAC/D;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,mCAAmC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA,gDAAgD;AAChD;AACA;AACA,yDAAyD,oBAAoB;AAC7E,yDAAyD;AACzD;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,gBAAgB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,gCAAgC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,8BAA8B;AAC9B,oCAAoC,EAAE;AACtC,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,gEAAgE;AAC7E,aAAa;AACb;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,aAAa;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAqC,EAAE;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gCAAgC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,aAAa;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO,OAAO;AACd;AACA;AACA;AACA;AACA,SAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,0DAA0D;AAC1D;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK,OAAO;AACZ;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,GAAG,EAAE,GAAG;AACT,CAAC,E;;;;;;;;AC1yDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC3BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2DAA2D,qBAAqB,sBAAsB;AACtG,mCAAmC,uBAAuB;AAC1D,0CAA0C,4BAA4B;AACtE,sCAAsC,0BAA0B;;AAEhE;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,4DAA4D,WAAW;AACvE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA,CAAC;AAAA,qG;;;;;;AC5VD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2D;AAC3D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B,mBAAmB;AAC9C;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;;AAEb;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AAAA,qG","file":"phenix-rtc-no-edge-bundled.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d73880bbfaa7d09ef050","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    './LodashLight'\n], function (LodashLight) {\n    'use strict';\n\n    return LodashLight;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-lodash-light/src/index.js\n// module id = 0\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    './assert'\n], function (assert) {\n    return assert;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-assert/src/index.js\n// module id = 1\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    './detectBrowser'\n], function (detectBrowser) {\n    return detectBrowser;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-detect-browser/src/index.js\n// module id = 2\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-assert',\n    'phenix-web-disposable'\n], function (_, assert, disposable) {\n    'use strict';\n\n    function Observable(initialValue, beforeChange) {\n        this.latestValue = null;\n        this.subscribeCallbacks = {};\n        this.subscriptionTimeout = 100;\n        this.subscriptionCount = 0;\n        this.resetOnChange = false;\n        this.lastChangeTime = 0;\n        this.isPendingChanges = false;\n        this.beforeChange = beforeChange;\n\n        setLatestValue.call(this, initialValue);\n    }\n\n    Observable.prototype.getValue = function getValue() {\n        return clone(this.latestValue);\n    };\n\n    Observable.prototype.setValue = function setValue(value) {\n        if (value !== this.latestValue) {\n            setLatestValue.call(this, value);\n            onSubscribeCallback.call(this, this.subscriptionTimeout);\n        }\n    };\n\n    Observable.prototype.subscribe = function subscribe(callback, options) {\n        assert.isFunction(callback, 'callback');\n\n        if (options) {\n            assert.isObject(options, 'options');\n        }\n\n        var that = this;\n        var key = _.uniqueId();\n        var listenForChanges;\n\n        that.subscribeCallbacks[key] = callback;\n        that.subscriptionCount += 1;\n\n        if (options) {\n            if (options.initial === 'notify') {\n                onSubscribeCallback.call(that, that.subscriptionTimeout, true);\n            }\n\n            if (options.listenForChanges) {\n                listenForChanges = setInterval(function() {\n                    var valueAtInterval = options.listenForChanges.callback();\n\n                    if (valueAtInterval !== that.latestValue) {\n                        that.setValue(valueAtInterval);\n                    }\n                }, options.listenForChanges.timeout);\n            }\n        }\n\n        return new disposable.Disposable(function dispose() {\n            delete that.subscribeCallbacks[key];\n\n            if (listenForChanges) {\n                clearInterval(listenForChanges);\n\n                listenForChanges = null;\n            }\n\n            that.subscriptionCount -= 1;\n        });\n    };\n\n    Observable.prototype.extend = function extend(options) {\n        assert.isObject(options, 'options');\n\n        switch (options.method) {\n        case 'notifyWhenChangesStop':\n            this.subscriptionTimeout = options.timeout;\n            this.resetOnChange = true;\n\n            break;\n        case 'notifyAtFixedRate':\n            this.subscriptionTimeout = options.timeout;\n\n            break;\n        default:\n            break;\n        }\n\n        if (_.isNumber(options.rateLimit)) {\n            this.subscriptionTimeout = options.rateLimit;\n        }\n\n        return this;\n    };\n\n    function clone(value) {\n        if (typeof value === 'undefined' || value === null) {\n            return value;\n        }\n\n        // Necessary for observable array. Subsequent comparison must not be equal in order to trigger updates.\n        if (_.isArray(value)) {\n            return value.slice();\n        }\n\n        return value;\n    }\n\n    function setLatestValue(value) {\n        var valueToSet = value;\n\n        if (this.beforeChange) {\n            valueToSet = this.beforeChange(value);\n        }\n\n        this.latestValue = clone(valueToSet);\n    }\n\n    function onSubscribeCallback(timeoutLength, noTimeout) {\n        this.lastChangeTime = _.now();\n\n        if (!this.isPendingChanges && this.subscriptionCount !== 0) {\n            this.isPendingChanges = true;\n\n            if (noTimeout) {\n                return notifySubscribers.call(this);\n            }\n\n            continueAfterTimeout.call(this, timeoutLength);\n        }\n    }\n\n    function continueAfterTimeout(timeoutLength) {\n        var that = this;\n\n        setTimeout(function() {\n            var timeElapsedSinceLastChange = _.now() - that.lastChangeTime;\n\n            if (that.resetOnChange && timeElapsedSinceLastChange < that.subscriptionTimeout) {\n                continueAfterTimeout.call(that, that.subscriptionTimeout - timeElapsedSinceLastChange);\n            } else {\n                notifySubscribers.call(that);\n            }\n        }, timeoutLength);\n    }\n\n    function notifySubscribers() {\n        try {\n            executeSubscriptionCallbacks.call(this);\n        } finally {\n            this.isPendingChanges = false;\n        }\n    }\n\n    function executeSubscriptionCallbacks() {\n        var that = this;\n\n        _.forOwn(that.subscribeCallbacks, function (callback) {\n            if (_.isFunction(callback)) {\n                callback(that.latestValue);\n            }\n        });\n    }\n\n    return Observable;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-observable/src/Observable.js\n// module id = 3\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    './Observable',\n    './ObservableArray',\n    './ObservableMonitor'\n], function (Observable, ObservableArray, ObservableMonitor) {\n    'use strict';\n\n    return {\n        Observable: Observable,\n        ObservableArray: ObservableArray,\n        ObservableMonitor: ObservableMonitor\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-observable/src/index.js\n// module id = 4\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    './WaitFor'\n], function(WaitFor) {\n    'use strict';\n\n    var log = function() {\n        console.log.apply(console, arguments);\n    } || function() {\n        };\n\n    var logError = function() {\n        console.error.apply(console, arguments);\n    } || log;\n\n    function PhenixVideo(ghost, stream, isUsingPlugin) {\n        var that = this;\n\n        this._ghost = ghost;\n        this._stream = stream;\n        this._isUsingPlugin = isUsingPlugin;\n        this._events = {};\n\n        var loaded = function loaded(success) {\n            that._loaded = true;\n            that._enabled = success === true;\n\n            if (success) {\n                initialize.call(that);\n            } else {\n                logError('Failed to create Phenix video element');\n            }\n\n            if (that._onReady) {\n                that._onReady(that._enabled);\n            }\n        };\n\n        try {\n            this._video = createPhenixVideoElement(isUsingPlugin);\n            this._video.className = this._ghost.className;\n            this._video.height = this._ghost.height;\n            this._video.width = this._ghost.width;\n\n            this._ghost.style.cssText = 'visibility:hidden !important;width:0px !important;height:0px !important;' +\n                'margin:0px !important;padding:0px !important;' +\n                'border-style:none !important;border-width:0px !important;' +\n                'max-width:0px !important;max-height:0px !important;outline:none !important';\n\n            this._video.onunload = function() {\n                that._loaded = false;\n            };\n\n            observeInsertion.call(this);\n\n            if (!document.body || !document.body.contains) {\n                log('document.body.contains is not supported');\n            }\n\n            if (document.body && document.body.contains && document.body.contains(this._ghost)) {\n                this._ghost.parentNode.replaceChild(this._video, this._ghost);\n            }\n\n            if (!isUsingPlugin) {\n                return loaded(true);\n            }\n\n            var waitFor = new WaitFor();\n\n            waitFor.waitForReady(this._video, loaded);\n        } catch (e) {\n            logError('Error while loading Phenix RTC' + e);\n            loaded(false);\n        }\n    }\n\n    PhenixVideo.prototype.hookUpEvents = function() {\n        var that = this;\n        var ghost = this._ghost;\n\n        this.addEventListener('error', function() {\n            dispatchEvent(ghost, 'error');\n        });\n        this.addEventListener('mute', function() {\n            ghost.muted = that._video.muted;\n            dispatchEvent(ghost, 'mute');\n        });\n        this.addEventListener('unmute', function() {\n            ghost.muted = that._video.muted;\n            dispatchEvent(ghost, 'unmute');\n        });\n        this.addEventListener('ended', function() {\n            ghost.ended = that._video.ended;\n            dispatchEvent(ghost, 'ended');\n        });\n        this.addEventListener('loadedmetadata', function() {\n            ghost.width = that._video.width;\n            ghost.height = that._video.height;\n            dispatchEvent(ghost, 'loadedmetadata');\n        });\n        this.addEventListener('loadeddata', function() {\n            ghost.width = that._video.width;\n            ghost.height = that._video.height;\n            dispatchEvent(ghost, 'loadeddata');\n        });\n        this.addEventListener('resize', function() {\n            ghost.width = that._video.width;\n            ghost.height = that._video.height;\n            dispatchEvent(ghost, 'resize');\n        });\n    };\n\n    PhenixVideo.prototype.onReady = function(callback) {\n        var that = this;\n\n        if (this._loaded) {\n            setTimeout(function() {\n                callback(that._enabled);\n            }, 1);\n        } else {\n            this._onReady = callback;\n        }\n    };\n\n    PhenixVideo.prototype.getElement = function() {\n        return this._video;\n    };\n\n    PhenixVideo.prototype.addEventListener = function(name, listener, useCapture) {\n        addEventListener.call(this, name, listener, useCapture);\n    };\n\n    PhenixVideo.prototype.removeEventListener = function(name, listener, useCapture) {\n        removeEventListener.call(this, name, listener, useCapture);\n    };\n\n    function createPhenixVideoElement(isUsingPlugin) {\n        var video = document.createElement('video');\n\n        if (isUsingPlugin) {\n            video = document.createElement('object');\n\n            video.type = 'application/x-phenix-video';\n        }\n\n        return video;\n    }\n\n    function addEventListener(name, listener, useCapture) { // eslint-disable-line no-unused-vars\n        if (!this._isUsingPlugin) {\n            return this._video.addEventListener(name, listener, useCapture);\n        }\n\n        var listeners = this._events[name];\n\n        if (!listeners) {\n            listeners = this._events[name] = [];\n\n            if (this._loaded) {\n                registerEvent.call(this, name);\n            }\n        }\n\n        listeners.push(listener);\n    }\n\n    function removeEventListener(name, listener, useCapture) { // eslint-disable-line no-unused-vars\n        if (!this._isUsingPlugin) {\n            return this._video.removeEventListener(name, listener, useCapture);\n        }\n\n        var listeners = this._events[name];\n\n        if (listeners) {\n            var idx = listeners.indexOf(listener);\n\n            if (idx >= 0) {\n                listeners = listeners.splice(idx, 1);\n\n                if (listeners.length > 0) {\n                    this._events[name] = listeners;\n                } else {\n                    delete this._events[name];\n                }\n            }\n        }\n    }\n\n    function registerEvent(name) {\n        var that = this;\n\n        function listener() {\n            var listeners = that._events[name];\n\n            if (listeners) {\n                for (var i = 0; i < listeners.length; i++) {\n                    listeners[i].apply(that, arguments);\n                }\n            }\n        }\n\n        that._video.phenixSetEventListener(name, listener);\n    }\n\n    function dispatchEvent(source, name) {\n        var event; // The custom event that will be created\n\n        if (document.createEvent) {\n            event = document.createEvent('HTMLEvents');\n            event.initEvent(name, true, true);\n        } else {\n            event = document.createEventObject();\n            event.eventType = name;\n        }\n\n        event.eventName = name;\n\n        setTimeout(function() {\n            if (document.createEvent) {\n                source.dispatchEvent(event);\n            } else {\n                source.fireEvent('on' + event.eventType, event);\n            }\n        });\n    }\n\n    function initialize() {\n        var events = Object.keys(this._events);\n\n        for (var i = 0; i < events.length; i++) {\n            registerEvent.call(this, events[i]);\n        }\n\n        this.hookUpEvents();\n\n        propagateAttributeChanges.call(this);\n\n        this._video.id = this._ghost.id;\n        this._video.style.cssText = this._ghost.cssText;\n        this._video.className = this._ghost.className;\n        this._video.innerHtml = this._ghost.innerHtml;\n        this._video.width = this._ghost.width;\n        this._video.height = this._ghost.height;\n        this._video.autoplay = this._ghost.autoplay;\n        this._video.muted = this._ghost.muted;\n        this._video.defaultMuted = this._ghost.defaultMuted;\n        this._video.volume = this._ghost.volume;\n\n        if (this._stream) {\n            this._video.src = this._stream;\n        }\n    }\n\n    function propagateAttributeChanges() {\n        var that = this;\n        var readonly = ['style'];\n\n        if (window.MutationObserver) {\n            // Newer browsers support an efficient way to observe DOM modifications\n            var observer = new MutationObserver(function(mutations) {\n                mutations.forEach(function(mutation) {\n                    if (mutation.type === 'attributes' && mutation.target === that._ghost && readonly.indexOf(mutation.attributeName) === -1) {\n                        that._video[mutation.attributeName] = that._ghost[mutation.attributeName];\n                    }\n                });\n            });\n\n            var configAttributes = {attributes: true};\n\n            observer.observe(that._ghost, configAttributes);\n        } else {\n            // For older browsers. There is a significant performance overhead with this method.\n            // See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events\n            log('Falling back to use of DOM event listeners. This results in degraded performance for further DOM modifications and does not work for IE prior to version 9. See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events for details.');\n\n            if (that._ghost.addEventListener) {\n                that._ghost.addEventListener('DOMAttrModified', function(event) {\n                    that._video[event.target.tagName] = that._ghost[event.target.tagName];\n                }, false);\n            } else {\n                that._ghost.attachEvent('onpropertychange', function(event) {\n                    that._video[event.target.tagName] = that._ghost[event.target.tagName];\n                });\n            }\n        }\n    }\n\n    function observeInsertion() {\n        var that = this;\n\n        if (window.MutationObserver) {\n            // Newer browsers support an efficient way to observe DOM modifications\n            var observer = new MutationObserver(function(mutations) {\n                mutations.forEach(function(mutation) {\n                    if (mutation.type === 'childList') {\n                        for (var i = 0; i < mutation.addedNodes.length; i++) {\n                            var node = mutation.addedNodes[i];\n\n                            if (mutation.target !== that._video) {\n                                if (node === that._ghost) {\n                                    // Replace element with our video element\n                                    mutation.target.replaceChild(that._video, that._ghost);\n                                    initialize.call(that);\n                                } else if (isDescendant(mutation.target, that._ghost)) {\n                                    that._ghost.parentNode.replaceChild(that._video, that._ghost);\n                                    initialize.call(that);\n                                }\n                            }\n                        }\n                    }\n                });\n            });\n\n            var configMutations = {\n                childList: true,\n                attributes: false,\n                characterData: false,\n                subtree: true\n            };\n\n            observer.observe(document.body, configMutations);\n        } else {\n            // For older browsers. There is a significant performance overhead with this method.\n            // See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events\n            log('Falling back to use of DOM event listeners. This results in degraded performance for further DOM modifications and does not work for IE prior to version 9. See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events for details.');\n\n            addEventListener(that._ghost, 'DOMNodeInserted', function() {\n                that._ghost.parentNode.replaceChild(that._video, that._ghost);\n                // That._video.appendChild(that._ghost);\n            }, false);\n        }\n    }\n\n    function isDescendant(parent, child) {\n        var node = child.parentNode;\n\n        while (node !== null) {\n            if (node === parent) {\n                return true;\n            }\n\n            node = node.parentNode;\n        }\n\n        return false;\n    }\n\n    return PhenixVideo;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./rtc/PhenixVideo.js\n// module id = 5\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-detect-browser'\n], function(DetectBrowser) {\n    'use strict';\n\n    var browser = new DetectBrowser(navigator.userAgent).detect();\n    var ReadyStateComplete = 4;\n\n    function WaitFor(timeout) {\n        this._timeout = timeout || 15000;\n    }\n\n    var logError = function() {\n        console.error.apply(console, arguments);\n    } || console.log;\n\n    WaitFor.prototype.waitForReadyWithTimeout = function(element, loaded, timeout) {\n        var triggered = false;\n        var waitFor = 1;\n        var sum = waitFor;\n\n        var guardedLoaded = function(success) {\n            if (!triggered) {\n                triggered = true;\n                loaded(success);\n            }\n        };\n\n        var checkLoaded = function checkLoaded() {\n            if (element.readyState === ReadyStateComplete) { // IE\n                guardedLoaded(true);\n            } else if (element.phenixVersion) { // Property is available\n                guardedLoaded(true);\n            } else {\n                waitFor = Math.min(waitFor + 1000, 2 * waitFor);\n                sum += waitFor;\n\n                if (sum > timeout) {\n                    logError('Timed out while waiting for <object> to load');\n                    guardedLoaded(false);\n                } else {\n                    setTimeout(checkLoaded, waitFor);\n                }\n            }\n        };\n\n        if (!(element.hasOwnProperty && element.hasOwnProperty('onload'))) {\n            //  There are no events in IE to detect when it is loaded\n            if (browser.browser !== 'IE') {\n                logError('No means of detecting when <object> is loaded');\n            }\n        }\n\n        element.onload = function() {\n            guardedLoaded(true);\n        };\n\n        checkLoaded();\n    };\n\n    WaitFor.prototype.waitForReady = function(element, loaded) {\n        if (element.phenixVersion) { // Already loaded\n            loaded(true);\n        } else {\n            this.waitForReadyWithTimeout(element, loaded, this._timeout);\n        }\n    };\n\n    return WaitFor;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./rtc/WaitFor.js\n// module id = 6\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-assert',\n    'phenix-web-observable',\n    'phenix-web-detect-browser',\n    './WebRTC',\n    './PhenixRTC'\n], function(_, assert, obserervable, DetectBrowser, webRTC, PhenixRTC) {\n    'use strict';\n\n    var browser = new DetectBrowser(navigator.userAgent).detect();\n    var adapter = {\n        RTCPeerConnection: webRTC.RTCPeerConnection,\n        RTCSessionDescription: webRTC.RTCSessionDescription,\n        RTCIceCandidate: webRTC.RTCIceCandidate,\n        getSources: webRTC.getSources,\n        getDestinations: webRTC.getDestinations,\n        getUserMedia: webRTC.getUserMedia,\n        getStats: webRTC.getStats,\n        attachMediaStream: webRTC.attachMediaStream,\n        attachUriStream: webRTC.attachUriStream,\n        reattachMediaStream: webRTC.reattachMediaStream,\n        browser: browser.browser,\n        browserVersion: browser.version,\n        webrtcSupported: webRTC.webrtcSupported,\n        phenixSupported: false,\n        isPhenixEnabled: function() {\n            return false;\n        },\n        onLoaded: undefined\n    };\n\n    if (PhenixRTC.isSupported()) {\n        adapter.phenixSupported = true;\n\n        var phenixRTC = new PhenixRTC();\n\n        var enablePhenix = function enablePhenix() {\n            adapter.RTCPeerConnection = phenixRTC.getRTCPeerConnectionConstructor();\n            adapter.RTCSessionDescription = phenixRTC.getRTCSessionDescriptionConstructor();\n            adapter.RTCIceCandidate = phenixRTC.getRTCIceCandidateConstructor();\n            adapter.getSources = phenixRTC.getSourcesDelegate();\n            adapter.getUserMedia = phenixRTC.getUserMediaDelegate();\n            adapter.getStats = phenixRTC.getStatsDelegate();\n\n            if (Function.prototype.bind) {\n                adapter.attachMediaStream = phenixRTC.attachMediaStream.bind(phenixRTC);\n                adapter.reattachMediaStream = phenixRTC.reattachMediaStream.bind(phenixRTC);\n                adapter.isPhenixEnabled = phenixRTC.isEnabled.bind(phenixRTC);\n            } else {\n                adapter.attachMediaStream = function() {\n                    phenixRTC.attachMediaStream.apply(phenixRTC, arguments);\n                };\n                adapter.reattachMediaStream = function() {\n                    phenixRTC.reattachMediaStream.apply(phenixRTC, arguments);\n                };\n                adapter.isPhenixEnabled = function() {\n                    return phenixRTC.isEnabled();\n                };\n            }\n\n            adapter.webrtcSupported = true;\n            adapter.phenixSupported = true;\n            adapter.phenixVersion = phenixRTC.getVersion();\n\n            if (adapter.onLoaded) {\n                adapter.onLoaded.call();\n            }\n        };\n\n        if (phenixRTC.isEnabled()) {\n            enablePhenix();\n        } else {\n            phenixRTC.onReady(function(enabled) {\n                if (enabled) {\n                    enablePhenix();\n\n                    if (adapter.onload && typeof adapter.onload === 'function') {\n                        adapter.onload();\n                    }\n                }\n            });\n        }\n\n        phenixRTC.onLoaded(function() {\n            enablePhenix();\n        });\n    } else {\n        adapter.phenixSupported = false;\n    }\n\n    return adapter;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./rtc/RTCAdapter.js\n// module id = 7\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([], function() {\n    'use strict';\n\n    var exportGlobal = function exportGlobal(adapter) {\n        window.RTCPeerConnection = adapter.RTCPeerConnection;\n        window.RTCSessionDescription = adapter.RTCSessionDescription;\n        window.RTCIceCandidate = adapter.RTCIceCandidate;\n    };\n\n    return exportGlobal;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./rtc/exportGlobal.js\n// module id = 8\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light'\n], function (_) {\n    var Assert = function () {\n\n    };\n\n    Assert.prototype.isObject = function isObject(obj, name) {\n        Assert.prototype.isString('name', name);\n\n        var error = '\"' + name + '\" must be an object';\n\n        if (!_.isObject(obj)) {\n            throw new Error(error);\n        }\n    };\n\n    Assert.prototype.isArray = function isArray(array, name) {\n        Assert.prototype.isString('name', name);\n\n        var error = '\"' + name + '\" must be an array';\n\n        if (!_.isArray(array)) {\n            throw new Error(error);\n        }\n    };\n\n    Assert.prototype.isString = function isString(string, name) {\n        var error = '\"' + name + '\" must be a string';\n\n        if (!_.isString(name)) {\n            throw new Error('\"name\" must be a string');\n        }\n\n        if (!_.isString(string)) {\n            throw new Error(error);\n        }\n    };\n\n    Assert.prototype.isBoolean = function isBoolean(bool, name) {\n        Assert.prototype.isString('name', name);\n\n        var error = '\"' + name + '\" must be a boolean';\n\n        if (!_.isBoolean(bool)) {\n            throw new Error(error);\n        }\n    };\n\n    Assert.prototype.isNumber = function isNumber(number, name) {\n        Assert.prototype.isString('name', name);\n\n        var error = '\"' + name + '\" must be a number';\n\n        if (!_.isNumber(number)) {\n            throw new Error(error);\n        }\n    };\n\n    Assert.prototype.isFunction = function isFunction(callback, name) {\n        Assert.prototype.isString('name', name);\n\n        var error = '\"' + name + '\" must be a function';\n\n        if (!_.isFunction(callback)) {\n            throw new Error(error);\n        }\n    };\n\n    // TODO (dcy) remove once all dependencies have been updated\n    Assert.prototype.stringNotEmpty = function stringNotEmpty(string, name) {\n        Assert.prototype.isStringNotEmpty(string, name);\n    };\n\n    Assert.prototype.isStringNotEmpty = function stringNotEmpty(string, name) {\n        Assert.prototype.isString('name', name);\n\n        var error = '\"' + name + '\" must not be empty';\n\n        Assert.prototype.isString(string, name);\n\n        if (string === '') {\n            throw new Error(error);\n        }\n    };\n\n    Assert.prototype.isInstanceOf = function (object, clazz, name) {\n        Assert.prototype.isString('name', name);\n\n        if (!_.isObject(object)) {\n            throw new Error('\"' + name + '\" must be an instance');\n        }\n\n        if (!(object instanceof clazz)) {\n            throw new Error('\"' + name + '\" must be a valid instance of class');\n        }\n    };\n\n    Assert.prototype.isNotUndefined = function (value, name) {\n        Assert.prototype.isString('name', name);\n\n        if (_.isUndefined(value)) {\n            throw new Error('\"' + name + '\" must not be undefined');\n        }\n    };\n\n    Assert.prototype.isValidType = function (type, types, name) {\n        Assert.prototype.isStringNotEmpty(name, 'name');\n\n        type = _.getEnumName(types, type);\n\n        if (_.isNullOrUndefined(type)) {\n            throw new Error('\"' + name + '\" must be a valid type');\n        }\n\n        return type;\n    };\n\n    Assert.prototype.isArrayOfString = function (value, name) {\n        Assert.prototype.isString(name, 'name');\n        Assert.prototype.isArray(value, name);\n\n        _.forEach(value, function (val, key) {\n            Assert.prototype.isString(val, name + '[' + key + ']');\n        });\n    };\n\n    return new Assert();\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-assert/src/assert.js\n// module id = 9\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine(['phenix-web-lodash-light'], function (_) {\n    'use strict';\n\n    function DetectBrowser(userAgent) {\n        this._userAgent = userAgent;\n    }\n\n    DetectBrowser.prototype.detect = function () {\n        var browser = 'Unknown';\n        var version = '?';\n        var browserMatch = this._userAgent.match(/(Chrome|Chromium|Firefox|Opera|Safari)+\\//);\n        var versionMatch = this._userAgent.match(/(Chrome|Chromium|Firefox|Version)+\\/([0-9]+)\\./);\n        var isWebview = false;\n\n        if (browserMatch && browserMatch.length >= 2) {\n            browser = browserMatch[1];\n        } else if (this._userAgent.match(/^\\(?Mozilla/)) {\n            browser = 'Mozilla';\n\n            if (this._userAgent.match(/MSIE/)\n                || this._userAgent.match(/; Trident\\/.*rv:[0-9]+/)) {\n                browser = 'IE';\n\n                if (versionMatch = this._userAgent.match(/MSIE ([0-9]+)/)) { // eslint-disable-line no-cond-assign\n                    version = parseInt(versionMatch[1], 10);\n\n                    // Compatibility view?\n                    if (versionMatch = this._userAgent.match(/MSIE [0-9]+.*MSIE ([0-9]+)/)) { // eslint-disable-line no-cond-assign\n                        version = parseInt(versionMatch[1], 10);\n                    }\n                } else if (versionMatch = this._userAgent.match(/rv:([0-9]+)/)) { // eslint-disable-line no-cond-assign\n                    version = parseInt(versionMatch[1], 10);\n                }\n            }\n        }\n\n        if (browser === 'Chrome' && this._userAgent.match(/OPR\\//)) {\n            // Opera pretends to be Chrome\n            browser = 'Opera';\n            versionMatch = this._userAgent.match(/(OPR)\\/([0-9]+)\\./);\n        } else if (browser === 'Chrome' && this._userAgent.match(/Edge\\//)) {\n            // Edge pretends to be Chrome\n            browser = 'Edge';\n            versionMatch = this._userAgent.match(/(Edge)\\/([0-9]+)\\./);\n        } else if ((browser === 'Firefox' || browser === 'IE') && this._userAgent.match(/Opera/)) {\n            // Opera pretends to be Firefox or IE\n            browser = 'Opera';\n            versionMatch = this._userAgent.match(/(Opera) ([0-9]+)\\./);\n        } else if (browser === 'Mozilla' && this._userAgent.match(/iphone|ipod|ipad/i)) {\n            browser = 'Safari';\n            version = parseInt(_.get(this._userAgent.match(/OS\\s([0-9]+)/), [1]), 10);\n            isWebview = true;\n        }\n\n        // https://developer.chrome.com/multidevice/user-agent\n        if (browser === 'Chrome' && (this._userAgent.match(/; wv/) || (this._userAgent.match(/Android/) && this._userAgent.match(/Version\\/[0-9].[0-9]/)))) {\n            isWebview = true;\n        }\n\n        if (browser !== 'IE' && versionMatch && versionMatch.length >= 3) {\n            version = parseInt(versionMatch[2], 10);\n        }\n\n        return {\n            browser: browser,\n            version: version,\n            isWebview: isWebview\n        };\n    };\n\n    return DetectBrowser;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-detect-browser/src/detectBrowser.js\n// module id = 10\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-assert'\n], function (_, assert) {\n    'use strict';\n\n    /**\n     * Create a new disposable object.\n     *\n     * @param cleanup The callback to perform whatever cleanup is required when this object is disposed.\n     * @constructor\n     */\n    function Disposable(cleanup) {\n        assert.isFunction(cleanup, 'cleanup');\n\n        this._cleanup = cleanup;\n    }\n\n    Disposable.prototype.dispose = function () {\n        return this._cleanup.call();\n    };\n\n    Disposable.prototype.toString = function () {\n        return _.toString(this);\n    };\n\n    return Disposable;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-disposable/src/Disposable.js\n// module id = 11\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light'\n], function (_) {\n    'use strict';\n\n    function DisposableList() {\n        this._list = [];\n    }\n\n    DisposableList.prototype.add = function (disposable) {\n        if (!disposable || !_.isFunction(disposable.dispose)) {\n            throw new Error('\"disposable\" must be a disposable or implement dispose');\n        }\n\n        this._list.push(disposable);\n    };\n\n    DisposableList.prototype.dispose = function () {\n        var results = [];\n\n        _.forEach(this._list, function (disposable) {\n            results.push(disposable.dispose());\n        });\n\n        this._list = [];\n\n        return results;\n    };\n\n    DisposableList.prototype.toString = function () {\n        return _.toString(this);\n    };\n\n    return DisposableList;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-disposable/src/DisposableList.js\n// module id = 12\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    './Disposable',\n    './DisposableList'\n], function (Disposable, DisposableList) {\n    return {\n        Disposable: Disposable,\n        DisposableList: DisposableList\n    };\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-disposable/src/index.js\n// module id = 13\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n], function () {\n    'use strict';\n\n    var _ = function () {\n\n    };\n\n    _.get = function get(objectToTraverse, path, defaultValue) {\n        if (_.isNullOrUndefined(objectToTraverse)) {\n            return defaultValue;\n        }\n\n        assertIsObject(objectToTraverse, 'objectToTraverse');\n\n        var properties = path;\n\n        if (_.isString(properties)) {\n            properties = buildPathFromString(path);\n        } else if (!_.isArray(properties)) {\n            throw new Error('Unsupported path type ' + typeof path);\n        }\n\n        var valueAtPath = _.reduce(properties, function (valueAtPath, prop) {\n            if (_.isObject(valueAtPath) || _.isArray(valueAtPath)) {\n                return valueAtPath[prop];\n            }\n\n            return;\n        }, objectToTraverse);\n\n        return _.isUndefined(valueAtPath) ? defaultValue : valueAtPath;\n    };\n\n    _.set = function get(objectToTraverse, path, value) {\n        if (!_.isObject(objectToTraverse)) {\n            return objectToTraverse;\n        }\n\n        assertIsObject(objectToTraverse, 'objectToTraverse');\n\n        var currentLocation = objectToTraverse;\n        var properties = path;\n\n        if (_.isString(properties)) {\n            properties = buildPathFromString(path);\n        } else if (!_.isArray(properties)) {\n            throw new Error('Unsupported path type ' + typeof path);\n        }\n\n        _.forEach(properties, function (prop, index) {\n            setNextValue(currentLocation, prop, getNextValue(properties, index, currentLocation, value));\n\n            currentLocation = currentLocation[prop];\n        });\n\n        return objectToTraverse;\n    };\n\n    _.bind = function bind(callback, that) {\n        var argsAfterContext = Array.prototype.slice.call(arguments, 2);\n\n        return function boundFunction() {\n            if (!_.isFunction(callback)) {\n                throw new TypeError('_.bind - callback must be a function');\n            }\n\n            var combinedArguments = argsAfterContext.concat(Array.prototype.slice.call(arguments));\n\n            return callback.apply(that, combinedArguments);\n        };\n    };\n\n    _.now = function now() {\n        return new Date().getTime();\n    };\n\n    _.utc = function utc(date) {\n        if (_.isNumber(date)) {\n            return date;\n        } else if (!date) {\n            return NaN;\n        }\n\n        return Math.floor(date);\n    };\n\n    _.isoString = function isoString() {\n        var now = new Date();\n\n        if (now.toISOString) {\n            return now.toISOString();\n        }\n\n        return now.getUTCFullYear() +\n            '-' + _.pad(now.getUTCMonth() + 1, 2) +\n            '-' + _.pad(now.getUTCDate(), 2) +\n            'T' + _.pad(now.getUTCHours(), 2) +\n            ':' + _.pad(now.getUTCMinutes(), 2) +\n            ':' + _.pad(now.getUTCSeconds(), 2) +\n            '.' + (now.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +\n            'Z';\n    };\n\n    _.map = function map(collection, callback) {\n        assertIsObject(collection, 'collection');\n\n        var newArray = [];\n\n        if (collection.constructor === Array) {\n            _.forEach(collection, function mapCollection(item, index) {\n                if (_.isString(callback) && _.isObject(item)) {\n                    newArray.push(item[callback]);\n                } else if (_.isFunction(callback)) {\n                    newArray.push(callback(item, index));\n                }\n            });\n        } else {\n            _.forOwn(collection, function mapCollection(value, key) {\n                if (_.isFunction(callback)) {\n                    newArray.push(callback(value, key));\n                }\n            });\n        }\n\n        return newArray;\n    };\n\n    _.values = function (collection) {\n        if (!_.isObject(collection) || _.isArray(collection)) {\n            throw new Error('Collection must be an object.');\n        }\n\n        return _.map(collection, function (value) {\n            return value;\n        });\n    };\n\n    _.keys = function (collection) {\n        if (!_.isObject(collection) || _.isArray(collection)) {\n            throw new Error('Collection must be an object.');\n        }\n\n        return _.map(collection, function (value, key) {\n            return key;\n        });\n    };\n\n    _.forEach = function forEach(collection, callback) {\n        if (!_.isFunction(callback)) {\n            throw new Error('Callback must be a function');\n        }\n\n        assertIsArray(collection, 'collection');\n\n        for (var i = 0; i < collection.length; i++) {\n            var callbackResponse = callback(collection[i], i);\n\n            if (callbackResponse === false) {\n                return;\n            }\n        }\n    };\n\n    _.forOwn = function forOwn(objectWithProperties, callback) {\n        if (!_.isFunction(callback)) {\n            throw new Error('Callback must be a function');\n        }\n\n        assertIsObject(objectWithProperties, 'objectWithProperties');\n\n        var keys = Object.keys(objectWithProperties);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n\n            if (objectWithProperties.hasOwnProperty(key) || Object.prototype.hasOwnProperty.call(objectWithProperties, key)) {\n                callback(objectWithProperties[key], key);\n            }\n        }\n    };\n\n    _.argumentsToArray = function (args) {\n        if (!_.isObject(args) || !args.length) {\n            throw new Error('Collection must be arguments');\n        }\n\n        var collection = [];\n\n        for (var i = 0; i < args.length; i++) {\n            collection.push(args[i]);\n        }\n\n        return collection;\n    };\n\n    _.assign = function assign(target) {\n        assertIsObject(target, 'target');\n\n        var sources = _.argumentsToArray(arguments);\n\n        sources.shift();\n\n        _.forEach(sources, function (source, index) {\n            assertIsObject(source, 'source ' + index);\n\n            _.forOwn(source, function (value, key) {\n                target[key] = value;\n            });\n        });\n\n        return target;\n    };\n\n    _.includes = function includes(collection, value) {\n        if (_.isString(collection)) {\n            assertIsString(value, 'Includes value and search parameter');\n\n            return collection.indexOf(value) > -1;\n        }\n\n        if (_.isUndefined(collection) || _.isUndefined(value)) {\n            return false;\n        }\n\n        assertIsObject(collection, 'collection');\n\n        var hasValue = false;\n\n        var checkCollection = function checkCollection(currentValue) {\n            if (currentValue === value) {\n                hasValue = true;\n            }\n        };\n\n        if (collection.constructor === Array) {\n            _.forEach(collection, checkCollection);\n        } else {\n            _.forOwn(collection, checkCollection);\n        }\n\n        return hasValue;\n    };\n\n    _.reduce = function reduce(collection, callback, initialValue) {\n        assertIsObject(collection, 'collection');\n\n        var result = initialValue === _.noop() ? null : initialValue;\n\n        if (collection.constructor === Array) {\n            _.forEach(collection, function (item, index) {\n                result = callback(result, item, index);\n            });\n        } else {\n            _.forOwn(collection, function (value, key) {\n                result = callback(result, value, key);\n            });\n        }\n\n        return result;\n    };\n\n    _.sample = function sample(collection) {\n        assertIsArray(collection, 'collection');\n\n        return collection[Math.floor(Math.random() * collection.length)];\n    };\n\n    _.uniqueId = function () {\n        return (_.now() * Math.random()).toString();\n    };\n\n    _.find = function find(collection, callback, initialIndex) {\n        assertIsArray(collection, 'collection');\n\n        var hasItem;\n\n        _.forEach(collection, function findInCollection(value, index) {\n            if (callback(value) && index >= (initialIndex || 0)) {\n                hasItem = value;\n\n                return hasItem;\n            }\n        });\n\n        return hasItem;\n    };\n\n    _.findIndex = function find(collection, callback, initialIndex) {\n        assertIsArray(collection, 'collection');\n\n        var hasItem;\n\n        _.forEach(collection, function findInCollection(value, index) {\n            if (callback(value, index) && index >= (initialIndex || 0)) {\n                hasItem = index;\n\n                return hasItem;\n            }\n        });\n\n        return hasItem;\n    };\n\n    _.filter = function filter(collection, callback) {\n        assertIsArray(collection, 'collection');\n\n        var newCollection = [];\n\n        _.forEach(collection, function findInCollection(value) {\n            if (callback(value)) {\n                newCollection.push(value);\n            }\n        });\n\n        return newCollection;\n    };\n\n    _.remove = function remove(collection, callback) {\n        assertIsArray(collection, 'collection');\n\n        var filterCallback = function filterCallback(value) {\n            return !callback(value);\n        };\n\n        return _.filter(collection, filterCallback);\n    };\n\n    _.take = function take(collection, size) {\n        assertIsArray(collection, 'collection');\n\n        return collection.slice(0, size);\n    };\n\n    _.hasDifferences = function hasDifferences(collectionA, collectionB, deep) {\n        return _.findDifferences(collectionA, collectionB, deep).length > 0;\n    };\n\n    _.findDifferences = function findDifferences(collectionA, collectionB, deep) {\n        var differences = [];\n        var visitedKeys = {};\n\n        function getDifferences(value, indexOrKey) {\n            visitedKeys[indexOrKey] = 1;\n\n            if ((_.isObject(value) || _.isArray(value)) && deep) {\n                if (!_.hasIndexOrKey(collectionB, indexOrKey)) {\n                    differences.push(indexOrKey);\n                } else if (!_.sameTypes(collectionA[indexOrKey], collectionB[indexOrKey])) {\n                    differences.push(indexOrKey);\n                } else if (_.hasDifferences(collectionA[indexOrKey], collectionB[indexOrKey], deep)) {\n                    differences.push(indexOrKey);\n                }\n            } else if (collectionA[indexOrKey] !== collectionB[indexOrKey]) {\n                differences.push(indexOrKey);\n            }\n        }\n\n        if (_.isArray(collectionA) && _.isArray(collectionB)) {\n            if (collectionA.length > collectionB.length) {\n                _.forEach(collectionA, getDifferences);\n            } else {\n                _.forEach(collectionB, getDifferences);\n            }\n        } else if (_.isObject(collectionA) && _.isObject(collectionB) && !_.isArray(collectionA) && !_.isArray(collectionB)) {\n            _.forOwn(collectionA, getDifferences);\n\n            _.forOwn(collectionB, function (value, key) {\n                if (!visitedKeys.hasOwnProperty(key)) {\n                    differences.push(key);\n                }\n            });\n        } else {\n            throw new Error('Object types do not match');\n        }\n\n        return differences;\n    };\n\n    _.hasIndexOrKey = function hasIndexOrKey(collection, indexOrKey) {\n        if (_.isArray(collection)) {\n            return collection.length > parseInt(indexOrKey);\n        } else if (_.isObject(collection)) {\n            return collection.hasOwnProperty(indexOrKey);\n        }\n\n        return false;\n    };\n\n    _.startsWith = function startsWith(value, prefix) {\n        assertIsString(value, 'value');\n        assertIsString(prefix, 'prefix');\n\n        return value.indexOf(prefix) === 0;\n    };\n\n    _.sameTypes = function sameTypes(first, second) {\n        if (_.isNullOrUndefined(first) || _.isNullOrUndefined(second)) {\n            return _.isNullOrUndefined(first) && _.isNullOrUndefined(second);\n        }\n\n        if (_.isArray(first) || _.isArray(second)) {\n            return _.isArray(first) && _.isArray(second);\n        }\n\n        return typeof first === typeof second;\n    };\n\n    _.freeze = function freeze(obj) {\n        if ('freeze' in Object) {\n            return Object.freeze(obj);\n        }\n\n        return obj;\n    };\n\n    _.noop = function () {\n        return undefined;\n    };\n\n    _.isObject = function isObject(obj) {\n        if (obj === null) {\n            return false;\n        }\n\n        return typeof obj === 'object';\n    };\n\n    _.isArray = function isArray(array) {\n        if (!_.isObject(array)) {\n            return false;\n        }\n\n        return array.constructor === Array;\n    };\n\n    _.isString = function isString(string) {\n        return typeof string === 'string';\n    };\n\n    _.isNumber = function isNumber(number) {\n        if (isNaN(number)) {\n            return false;\n        }\n\n        return typeof number === 'number';\n    };\n\n    _.isBoolean = function isBoolean(bool) {\n        return typeof bool === 'boolean';\n    };\n\n    _.isFunction = function isFunction(func) {\n        return typeof func === 'function';\n    };\n\n    _.isNullOrUndefined = function isNullOrUndefined(value) {\n        return value === null || _.isUndefined(value);\n    };\n\n    _.isUndefined = function isUndefined(value) {\n        return typeof value === 'undefined';\n    };\n\n    _.getEnumName = function getEnumName(enums, nameOrId) {\n        var enumObject = null;\n\n        var enumArray = _.map(enums, function (value) {\n            return value;\n        });\n\n        if (_.isNumber(nameOrId)) {\n            enumObject = _.find(enumArray, function (current) {\n                return current.id === nameOrId;\n            });\n        } else if (_.isString(nameOrId)) {\n            enumObject = _.find(enumArray, function (current) {\n                return current.name.toLowerCase() === nameOrId.toLowerCase();\n            });\n        }\n\n        if (enumObject) {\n            return enumObject.name;\n        }\n\n        return null;\n    };\n\n    _.toString = function toString(data) {\n        if (_.isString(data)) {\n            return data;\n        }\n\n        if (_.isBoolean(data)) {\n            return data ? 'true' : 'false';\n        }\n\n        if (_.isNumber(data)) {\n            return data.toString();\n        }\n\n        var toStringStr = '';\n\n        if (data) {\n            if (_.isFunction(data.toString)) {\n                toStringStr = data.toString();\n            } else if (_.isObject(data.toString)) {\n                try {\n                    toStringStr = data.toString();\n                } catch (e) {\n                    toStringStr = '[object invalid toString()]';\n                }\n            }\n        }\n\n        if (toStringStr.indexOf('[object') !== 0) {\n            return toStringStr;\n        }\n\n        var cache = [];\n\n        return toStringStr + JSON.stringify(data, function (key, value) {\n            if (_.isObject(value) && !_.isNullOrUndefined(value)) {\n                if (_.includes(cache, value)) {\n                    return '<recursive>';\n                }\n\n                cache.push(value);\n            }\n\n            return key === '' ? value : _.toString(value);\n        });\n    };\n\n    _.pad = function padNumber(value, numberToPad) {\n        assertIsNumber(value, 'value');\n        assertIsNumber(numberToPad, 'numberToPad');\n\n        var valueLength = value.toString().length;\n\n        for (var i = 0; i < numberToPad - valueLength; i++) {\n            value = '0' + value.toString();\n        }\n\n        return value.toString();\n    };\n\n    _.addEventListener = function addEventListener(target, eventName, listener, useCapture) {\n        assertIsObject(target, 'target');\n        assertIsString(eventName, 'eventName');\n        assertIsFunction(listener, 'listener');\n\n        if (target.phenixAddEventListener) {\n            target.phenixAddEventListener.call(target, eventName, listener, !!useCapture);\n        } else if (target.addEventListener) {\n            target.addEventListener(eventName, listener, !!useCapture);\n        } else if (target.attachEvent) {\n            target.attachEvent(\"on\" + eventName, listener);\n        }\n    };\n\n    _.removeEventListener = function removeEventListener(target, eventName, listener, useCapture) {\n        assertIsObject(target, 'target');\n        assertIsString(eventName, 'eventName');\n        assertIsFunction(listener, 'listener');\n\n        if (target.phenixRemoveEventListener) {\n            target.phenixRemoveEventListener.call(target, eventName, listener, !!useCapture);\n        } else if (target.removeEventListener) {\n            target.removeEventListener(eventName, listener, !!useCapture);\n        } else if (target.detachEvent) {\n            target.detachEvent(\"on\" + eventName, listener);\n        }\n    };\n\n    var assertIsArray = function assertIsArray(collection) {\n        if (!_.isArray(collection)) {\n            throw new Error('Input must be an array.');\n        }\n    };\n\n    var assertIsNumber = function assertIsNumber(number, name) {\n        assertIsString(name, 'name');\n\n        if (!_.isNumber(number)) {\n            throw new Error(name + ' must be a number.');\n        }\n    };\n\n    var assertIsObject = function assertIsObject(collection, name) {\n        assertIsString(name, 'name');\n\n        if (!_.isObject(collection)) {\n            throw new Error('collection type not supported - ' + name + ' must be an array or object.');\n        }\n    };\n\n    var assertIsFunction = function assertIsFunction(callback, name) {\n        assertIsString(name, 'name');\n\n        if (!_.isFunction(callback)) {\n            throw new Error(name + ' must be a function.');\n        }\n    };\n\n    var assertIsString = function assertIsString(value, name) {\n        if (!_.isString(name)) {\n            throw new Error('Name must be a string.');\n        }\n\n        if (!_.isString(value)) {\n            throw new Error(name + ' must be a string.');\n        }\n    };\n\n    function buildPathFromString(stringPath) {\n        var properties = stringPath.split('.');\n        var path = [];\n\n        _.forEach(properties, function (prop) {\n            path = path.concat(buildSubPathFromString(prop));\n        });\n\n        return path;\n    }\n\n    function buildSubPathFromString(stringPath) {\n        var possibleSubPath = '';\n        var path = [];\n        var countOfOpeningBrackets = 0;\n\n        for (var i = 0; i < stringPath.length; i++) {\n            if (stringPath[i] === '[') {\n                countOfOpeningBrackets++;\n\n                if (!_.isString(possibleSubPath) || countOfOpeningBrackets > 1) {\n                    return [stringPath];\n                }\n\n                if (possibleSubPath) {\n                    path.push(possibleSubPath);\n                    possibleSubPath = '';\n                }\n            } else if (stringPath[i] === ']') {\n                countOfOpeningBrackets--;\n\n                if (countOfOpeningBrackets !== 0) {\n                    return [stringPath];\n                }\n\n                path.push(possibleSubPath);\n                possibleSubPath = '';\n            } else if (i === stringPath.length - 1) {\n                return [stringPath];\n            } else {\n                possibleSubPath += stringPath[i];\n            }\n        }\n\n        return path;\n    }\n\n    function getNextValue(path, index, currentLocation, value) {\n        if (path.length - 1 === index) {\n            return value;\n        }\n\n        var currentPropOrIndex = path[index];\n        var nextPropOrIndex = path[index + 1];\n\n        if (_.isArray(currentLocation[currentPropOrIndex]) || _.isObject(currentLocation[currentPropOrIndex])) {\n            return currentLocation[currentPropOrIndex];\n        }\n\n        if (!_.isArray(currentLocation[currentPropOrIndex]) && _.isNumber(parseInt(nextPropOrIndex))) {\n            return [];\n        } else if (!_.isObject(currentLocation[currentPropOrIndex]) && _.isString(nextPropOrIndex)) {\n            return {};\n        }\n\n        throw new Error('Unsupported type ' + typeof currentPropOrIndex + ' when setting property or index');\n    }\n\n    function setNextValue(objectToTraverse, propertyOrIndex, value) {\n        if (_.isNumber(parseInt(propertyOrIndex)) && _.isArray(objectToTraverse)) {\n            return objectToTraverse[propertyOrIndex] = value;\n        } else if (_.isString(propertyOrIndex) && _.isObject(objectToTraverse)) {\n            return objectToTraverse[propertyOrIndex] = value;\n        }\n\n        throw new Error('Unsupported type ' + typeof propertyOrIndex + ' when setting property or index');\n    }\n\n    return _;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-lodash-light/src/LodashLight.js\n// module id = 14\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-assert',\n    './Observable'\n], function (_, assert, Observable) {\n    'use strict';\n\n    function ObservableArray(initialValues, beforeChange) {\n        var valuesToSet = initialValues;\n\n        if (valuesToSet === undefined || valuesToSet === null) {\n            valuesToSet = [];\n        }\n\n        assert.isArray(valuesToSet, 'valuesToSet');\n\n        this.observableArray = new Observable(valuesToSet, beforeChange);\n    }\n\n    ObservableArray.prototype.getValue = function getValue() {\n        return this.observableArray.getValue();\n    };\n\n    ObservableArray.prototype.setValue = function setValue(values) {\n        if (values === undefined || values === null) {\n            values = [];\n        }\n\n        if (values !== undefined) {\n            assert.isArray(values, 'values');\n        }\n\n        return this.observableArray.setValue(values);\n    };\n\n    ObservableArray.prototype.subscribe = function subscribe(callback, options) {\n        return this.observableArray.subscribe(callback, options);\n    };\n\n    ObservableArray.prototype.push = function push(value) {\n        var array = this.observableArray.getValue();\n        array.push(value);\n\n        this.observableArray.setValue(array);\n    };\n\n    ObservableArray.prototype.pop = function pop() {\n        var array = this.observableArray.getValue();\n        var value = array.pop();\n\n        this.observableArray.setValue(array);\n\n        return value;\n    };\n\n    ObservableArray.prototype.remove = function remove(valueOrFunction) {\n        var array = this.observableArray.getValue();\n\n        var filterFunction = function (value) {\n            return _.isFunction(valueOrFunction) ? valueOrFunction(value) : value === valueOrFunction;\n        };\n\n        var valuesToRemove = _.filter(array, filterFunction);\n\n        if (valuesToRemove.length > 0) {\n            this.observableArray.setValue(_.remove(array, filterFunction));\n        }\n\n        return valuesToRemove;\n    };\n\n    ObservableArray.prototype.removeAll = function removeAll() {\n        var array = this.observableArray.getValue();\n\n        this.observableArray.setValue([]);\n\n        return array;\n    };\n\n    ObservableArray.prototype.extend = function extend(options) {\n        this.observableArray.extend(options);\n\n        return this;\n    };\n\n    return ObservableArray;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-observable/src/ObservableArray.js\n// module id = 15\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-assert'\n], function (_, assert) {\n    'use strict';\n\n    function ObservableMonitor(observable) {\n        assert.isObject(observable, 'observable');\n\n        this._observable = observable;\n        this._listenerSubscription = null;\n        this._isEnabled = false;\n    }\n\n    ObservableMonitor.prototype.start = function start(checkForChanges, timeout) {\n        this._isEnabled = true;\n\n        this._listenerSubscription = this._observable.subscribe(_.noop, {\n            listenForChanges: {\n                callback: checkForChanges,\n                timeout: timeout || 500\n            }\n        });\n    };\n\n    ObservableMonitor.prototype.stop = function stop() {\n        this._isEnabled = false;\n\n        if (this._listenerSubscription) {\n            this._listenerSubscription.dispose();\n        }\n\n        this._listenerSubscription = null;\n    };\n\n    ObservableMonitor.prototype.isEnabled = function isEnabled() {\n        return this._isEnabled;\n    };\n\n    return ObservableMonitor;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/phenix-web-observable/src/ObservableMonitor.js\n// module id = 16\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/webpack/buildin/global.js\n// module id = 17\n// module chunks = 0","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\n},{}],2:[function(require,module,exports){\n(function (global){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar adapterFactory = require('./adapter_factory.js');\nmodule.exports = adapterFactory({window: global.window});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./adapter_factory.js\":3}],3:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var utils = require('./utils');\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      utils.shimCreateObjectURL(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      utils.shimCreateObjectURL(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      utils.shimCreateObjectURL(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      // shim window.URL.createObjectURL Safari (technical preview)\n      utils.shimCreateObjectURL(window);\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimGetUserMedia(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n\n},{\"./chrome/chrome_shim\":4,\"./edge/edge_shim\":1,\"./firefox/firefox_shim\":6,\"./safari/safari_shim\":8,\"./utils\":9}],4:[function(require,module,exports){\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\nvar chromeShim = {\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        }\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!pc._ontrackpoly) {\n          pc._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n          };\n          pc.addEventListener('addstream', pc._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          var sender = origAddTrack.apply(pc, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(pc, track);\n            pc._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n          var pc = this;\n          origRemoveTrack.apply(pc, arguments);\n          var idx = pc._senders.indexOf(sender);\n          if (idx !== -1) {\n            pc._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push(shimSenderWithDtmf(pc, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n               'getSenders' in window.RTCPeerConnection.prototype &&\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n               window.RTCRtpSender &&\n               !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimAddTrackRemoveTrack: function(window) {\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack) {\n      return;\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\n        .getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var self = this;\n      var nativeStreams = origGetLocalStreams.apply(this);\n      self._reverseStreams = self._reverseStreams || {};\n      return nativeStreams.map(function(stream) {\n        return self._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!pc._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(pc, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\n          pc._streams[stream.id].id : stream.id)];\n      delete pc._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(function(t) {\n            return t === track;\n          })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      var alreadyExists = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n      var oldStream = pc._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      } else {\n        var newStream = new window.MediaStream([track]);\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        pc.addStream(newStream);\n      }\n      return pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n    };\n\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === pc;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      pc._streams = pc._streams || {};\n      var stream;\n      Object.keys(pc._streams).forEach(function(streamid) {\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = pc._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          pc.removeStream(stream);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = window.RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimAddTrackRemoveTrack: chromeShim.shimAddTrackRemoveTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils.js\":9,\"./getusermedia\":5}],5:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = require('../utils.js');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 61;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        InvalidStateError: 'NotReadableError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n        MediaDeviceKillSwitchOn: 'NotReadableError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        onError(shimError_(e));\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n},{\"../utils.js\":9}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\n\nvar firefoxShim = {\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: require('./getusermedia')\n};\n\n},{\"../utils\":9,\"./getusermedia\":7}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = require('../utils');\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n},{\"../utils\":9}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar utils = require('../utils');\n\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimLocalStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n        var result = null;\n        if (this._localStreams) {\n          this._localStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        if (this._remoteStreams) {\n          this._remoteStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        return result;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (this._localStreams.indexOf(stream) === -1) {\n          this._localStreams.push(stream);\n        }\n        var self = this;\n        stream.getTracks().forEach(function(track) {\n          _addTrack.call(self, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (this._localStreams.indexOf(stream) === -1) {\n            this._localStreams.push(stream);\n          }\n        }\n        _addTrack.call(this, track, stream);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var self = this;\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function(sender) {\n          if (tracks.indexOf(sender.track) !== -1) {\n            self.removeTrack(sender);\n          }\n        });\n      };\n    }\n  },\n  shimRemoteStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            var stream = e.streams[0];\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = e.streams[0];\n            this.dispatchEvent(event);\n          }.bind(this));\n        }\n      });\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  },\n  shimRTCIceServerUrls: function(window) {\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimCallbacksAPI: safariShim.shimCallbacksAPI,\n  shimLocalStreamsAPI: safariShim.shimLocalStreamsAPI,\n  shimRemoteStreamsAPI: safariShim.shimRemoteStreamsAPI,\n  shimGetUserMedia: safariShim.shimGetUserMedia,\n  shimRTCIceServerUrls: safariShim.shimRTCIceServerUrls\n  // TODO\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n},{\"../utils\":9}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  disableWarnings: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  deprecated: function(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n        ' instead.');\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        utils.deprecated('URL.createObjectURL(stream)',\n            'elem.srcObject = stream');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  deprecated: utils.deprecated,\n  disableLog: utils.disableLog,\n  disableWarnings: utils.disableWarnings,\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n},{}]},{},[2])(2)\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/webrtc-adapter/out/adapter_no_edge.js\n// module id = 18\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\ndefine('phenix-rtc', [\n    './rtc/RTCAdapter',\n    './rtc/exportGlobal'\n], function(adapter, exportGlobal) {\n    adapter.onLoaded = function() {\n        exportGlobal(adapter);\n    };\n\n    adapter.onLoaded();\n\n    return adapter;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./main.js\n// module id = 19\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-assert',\n    'phenix-web-observable',\n    './WaitFor',\n    './PhenixVideo'\n], function(_, assert, observable, WaitFor, PhenixVideo) {\n    'use strict';\n\n    var log = function() {\n        console.log.apply(console, arguments);\n    } || function() {\n        };\n\n    var logError = function() {\n        console.error.apply(console, arguments);\n    } || log;\n\n    function PhenixRTC() {\n        var that = this;\n\n        this._root = createInvisibleParentNode();\n        this._version = '?';\n\n        var ready = function ready(success) {\n            that._loaded = true;\n            that._enabled = success === true;\n            that._version = that._phenixRTC.phenixVersion || '?.?.?.?';\n\n            if (success) {\n                log('Phenix RTC ' + that._version);\n            } else {\n                log('No Phenix RTC');\n            }\n\n            if (that._onReady) {\n                that._onReady(that._enabled);\n            }\n        };\n\n        try {\n            this._phenixRTC = createPhenixRTC(this._root);\n\n            this._phenixRTC.onunload = function() {\n                that._loaded = false;\n            };\n\n            var waitFor = new WaitFor();\n\n            waitFor.waitForReady(this._phenixRTC, ready);\n        } catch (e) {\n            logError('Error while loading Phenix RTC' + e);\n        }\n    }\n\n    PhenixRTC.prototype.onReady = function(callback) {\n        var that = this;\n\n        if (this._loaded) {\n            setTimeout(function() {\n                callback(that._enabled);\n            }, 1);\n        } else {\n            this._onReady = callback;\n        }\n    };\n\n    PhenixRTC.prototype.onLoaded = function(callback) {\n        this._onLoaded = callback;\n    };\n\n    PhenixRTC.prototype.isLoaded = function() {\n        return this._loaded === true;\n    };\n\n    // Static function\n    PhenixRTC.isSupported = function() {\n        if (navigator.plugins) {\n            var plugins = navigator.plugins;\n\n            for (var i = 0; i < plugins.length; i++) {\n                if (plugins[i].name.indexOf('PhenixRTC') >= 0) {\n                    return true;\n                }\n            }\n        }\n\n        if (navigator.userAgent.match(/MSIE/) || navigator.userAgent.match(/Trident/)) {\n            try {\n                new window.ActiveXObject('PhenixP2P.RTC');\n\n                return true;\n            } catch (e) {\n                return false;\n            }\n        }\n\n        return false;\n    };\n\n    PhenixRTC.prototype.isEnabled = function() {\n        verifyPhenixRTCInDOM.call(this);\n\n        return this._phenixRTC && this._phenixRTC.phenixVersion !== undefined;\n    };\n\n    PhenixRTC.prototype.getVersion = function() {\n        verifyPhenixRTCInDOM.call(this);\n\n        return this._version;\n    };\n\n    PhenixRTC.prototype.getRTCPeerConnectionConstructor = function() {\n        verifyPhenixRTCInDOM.call(this);\n\n        return wrapPhenixClass(this._phenixRTC.RTCPeerConnection);\n    };\n\n    PhenixRTC.prototype.getRTCSessionDescriptionConstructor = function() {\n        verifyPhenixRTCInDOM.call(this);\n\n        return wrapPhenixClass(this._phenixRTC.RTCSessionDescription);\n    };\n\n    PhenixRTC.prototype.getRTCIceCandidateConstructor = function() {\n        verifyPhenixRTCInDOM.call(this);\n\n        return wrapPhenixClass(this._phenixRTC.RTCIceCandidate);\n    };\n\n    PhenixRTC.prototype.getSourcesDelegate = function() {\n        var that = this;\n\n        return function(sourcesInfoCallback) {\n            verifyPhenixRTCInDOM.call(that);\n\n            return that._phenixRTC.getSources(sourcesInfoCallback);\n        };\n    };\n\n    PhenixRTC.prototype.getUserMediaDelegate = function() {\n        var that = this;\n\n        return function(constraints, successCallback, failureCallback) {\n            verifyPhenixRTCInDOM.call(that);\n\n            return that._phenixRTC.getUserMedia(constraints, successCallback, failureCallback);\n        };\n    };\n\n    PhenixRTC.prototype.getStatsDelegate = function() {\n        return function(pc, track, successCallback, errorCallback) {\n            return pc.getStats(track, successCallback, errorCallback);\n        };\n    };\n\n    PhenixRTC.prototype.attachMediaStream = function(element, stream) {\n        verifyPhenixRTCInDOM.call(this);\n\n        return attachMediaStream.call(this, element, stream);\n    };\n\n    PhenixRTC.prototype.reattachMediaStream = function(to, from) {\n        verifyPhenixRTCInDOM.call(this);\n\n        return this.attachMediaStream(to, from.src);\n    };\n\n    function verifyPhenixRTCInDOM() {\n        if (this._root && document.getElementById('phenixRTC') !== this._root) {\n            document.body.appendChild(this._root);\n\n            if (this._onLoaded) {\n                this._onLoaded.call(this);\n            }\n        }\n    }\n\n    function createInvisibleParentNode() {\n        var node = document.createElement('div');\n\n        node.id = 'phenixRTC';\n        node.style.cssText = 'visibility:hidden !important;width:0px !important;height:0px !important;' +\n            'margin:0px !important;padding:0px !important;' +\n            'border-style:none !important;border-width:0px !important;' +\n            'max-width:0px !important;max-height:0px !important;outline:none !important';\n\n        document.body.appendChild(node);\n\n        return node;\n    }\n\n    function createPhenixRTC(parent) {\n        var phenixRTC = document.createElement('object');\n\n        phenixRTC.type = 'application/x-phenix-rtc';\n\n        parent.appendChild(phenixRTC);\n\n        return phenixRTC;\n    }\n\n    function attachMediaStream(element, stream) {\n        if (!element) {\n            throw new Error('Can not attach a stream to a undefined element');\n        }\n\n        if (element.phenixVersion) {\n            // It's one of ours\n            element.src = stream;\n\n            return element;\n        }\n\n        var phenixVideo = new PhenixVideo(element, stream, true);\n\n        phenixVideo.getElement().phenixPresenter = phenixVideo;\n\n        return phenixVideo.getElement();\n    }\n\n    function wrapPhenixClass(PhenixClass) {\n        var WrappedPhenixClass = function WrappedPhenixClass() {\n            var phenixClass = null;\n\n            // Phenix Classes do not have prototype, bind, apply, call, etc.\n            switch (arguments.length) {\n            case 0:\n                phenixClass = new PhenixClass();\n\n                break;\n            case 1:\n                phenixClass = new PhenixClass(arguments[0]);\n\n                break;\n            case 2:\n                phenixClass = new PhenixClass(arguments[0], arguments[1]);\n\n                break;\n            case 3:\n                phenixClass = new PhenixClass(arguments[0], arguments[1], arguments[2]);\n\n                break;\n            case 4:\n                phenixClass = new PhenixClass(arguments[0], arguments[1], arguments[2], arguments[3]);\n\n                break;\n            case 5:\n                phenixClass = new PhenixClass(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);\n\n                break;\n            default:\n                throw new Error('Unsupported number of arguments in Phenix Object Constructor');\n            }\n\n            phenixClass.phenixAddEventListener = _.bind(addEventListener, phenixClass);\n            phenixClass.phenixRemoveEventListener = _.bind(removeEventListener, phenixClass);\n\n            return phenixClass;\n        };\n\n        _.forOwn(PhenixClass, function(value, key) {\n            WrappedPhenixClass[key] = value;\n        });\n\n        return WrappedPhenixClass;\n    }\n\n    /**\n     * All modern browsers including IE9+ support addEventListener\n     * IE8 and less support attachEvent(...)\n     * Phenix supports proprietary API to register events\n     */\n    function addEventListener(name, listener/* , useCapture */) {\n        assert.stringNotEmpty(name, 'name');\n        assert.isFunction(listener, 'listener');\n\n        setPhenixEventListener.call(this, name);\n        addObservableEventListener.call(this, name, listener);\n    }\n\n    function removeEventListener(name, listener/* , useCapture */) {\n        removeObservableEventListener.call(this, name, listener);\n    }\n\n    function setPhenixEventListener(eventName) {\n        if (this.events && this.events[eventName]) {\n            return;\n        }\n\n        if (!this.events) {\n            this.events = {};\n        }\n\n        var events = this.events;\n\n        events[eventName] = {\n            observable: new observable.Observable().extend({timeout: 0}),\n            subscription: null,\n            listeners: []\n        };\n\n        this.phenixSetEventListener(eventName, _.bind(events[eventName].observable.setValue, events[eventName].observable));\n\n        events[eventName].subscription = events[eventName].observable.subscribe(function(event) {\n            var observableEvent = events[eventName];\n            var eventListeners = observableEvent.listeners;\n\n            _.forEach(eventListeners, function(eventListener) {\n                eventListener(event);\n            });\n        });\n    }\n\n    function addObservableEventListener(eventName, listener) {\n        if (!this.events || !this.events[eventName]) {\n            throw new Error('No event observable for event: ' + name);\n        }\n\n        this.events[eventName].listeners.push(listener);\n    }\n\n    function removeObservableEventListener(eventName, listener) {\n        if (!this.events || !this.events.events[eventName]) {\n            return;\n        }\n\n        this.events[eventName].listeners = _.filter(this.events[eventName].listeners, function(callback) {\n            return listener !== callback;\n        });\n    }\n\n    return PhenixRTC;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./rtc/PhenixRTC.js\n// module id = 20\n// module chunks = 0","/**\n * Copyright 2018 Phenix Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\ndefine([\n    'phenix-web-lodash-light',\n    'phenix-web-detect-browser',\n    'webrtc-adapter',\n    './PhenixVideo'\n], function(_, DetectBrowser, webRtcAdapter, PhenixVideo) { // eslint-disable-line no-unused-vars\n    'use strict';\n\n    var log = function() {\n        console.log.apply(console, arguments);\n    };\n\n    var browser = new DetectBrowser(navigator.userAgent).detect();\n    var RTCPeerConnection = window.RTCPeerConnection;\n    var RTCSessionDescription = window.RTCSessionDescription;\n    var RTCIceCandidate = window.RTCIceCandidate;\n    var getSources = null;\n    var getDestinations = null;\n    var getUserMedia = null;\n    var getStats = null;\n    var attachMediaStream = null;\n    var attachUriStream = null;\n    var reattachMediaStream = null;\n    var webrtcSupported = false;\n\n    function shimRTC() {\n        if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n            getSources = _.bind(navigatorMediaDevicesEnumerateDevicesByTypeWrapper, null, 'input');\n        }\n\n        if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n            getDestinations = _.bind(navigatorMediaDevicesEnumerateDevicesByTypeWrapper, null, 'output');\n        }\n\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n            getUserMedia = navigatorGetUserMedia;\n        }\n\n        if (!window.RTCPeerConnection) {\n            return log('[%s] browser version [%s] does not appear to be WebRTC-capable', browser.browser, browser.version);\n        }\n\n        switch (browser.browser) {\n        case 'Firefox':\n            log('Firefox detected', browser);\n\n            // Attach a media stream to an element.\n            attachMediaStream = function(element, stream) {\n                log('Attaching media stream');\n\n                var muted = element.muted;\n\n                if (browser.version > 57) {\n                    element.srcObject = stream;\n                }\n\n                element.mozSrcObject = stream;\n                element.play();\n\n                if (muted === true) {\n                    // FF unmutes upon play()\n                    element.muted = true;\n                }\n\n                return element;\n            };\n\n            reattachMediaStream = function(to, from) {\n                log('Reattaching media stream');\n\n                var muted = to.muted;\n\n                if (browser.version > 57) {\n                    to.srcObject = from.srcObject;\n                }\n\n                to.mozSrcObject = from.mozSrcObject;\n                to.play();\n\n                if (muted === true) {\n                    // FF unmutes upon play()\n                    to.muted = true;\n                }\n\n                return to;\n            };\n\n            getStats = function getPeerConnectionStats(pc, track, successCallback, errorCallback) {\n                pc.getStats(track, _.bind(handleGetStatsSuccess, this, pc, successCallback), errorCallback);\n            };\n\n            webrtcSupported = true;\n\n            break;\n        case 'Opera':\n            log('Opera detected', browser);\n\n            attachMediaStream = attachStreamToElement;\n            reattachMediaStream = reattachStreamToElement;\n            getStats = function getPeerConnectionStats(pc, track, successCallback, errorCallback) {\n                pc.getStats(_.bind(handleGetStatsSuccess, this, pc, successCallback), track, errorCallback);\n            };\n\n            webrtcSupported = true;\n\n            break;\n        case 'Chrome':\n            log('Webkit detected', browser);\n\n            attachMediaStream = attachStreamToElement;\n            reattachMediaStream = reattachStreamToElement;\n            getStats = function getPeerConnectionStats(pc, track, successCallback, errorCallback) {\n                pc.getStats(_.bind(handleGetStatsSuccess, this, pc, successCallback), track, errorCallback);\n            };\n\n            webrtcSupported = true;\n\n            break;\n        case 'Edge':\n            log('Edge detected', browser);\n\n            attachMediaStream = attachStreamToElement;\n            reattachMediaStream = reattachStreamToElement;\n            getStats = function getPeerConnectionStats(pc, track, successCallback, errorCallback) {\n                pc.getStats(track, _.bind(handleGetStatsSuccess, this, pc, successCallback), errorCallback);\n            };\n\n            webrtcSupported = true;\n\n            break;\n        case 'Safari':\n            log('Safari detected', browser);\n\n            attachMediaStream = function(element, stream) {\n                if (_.isObject(stream)) {\n                    element.__phenixHasPlayedWebRtc = true;\n                }\n\n                element = attachStreamToElement(element, stream);\n\n                return element;\n            };\n            attachUriStream = function(element, streamUri) {\n                if (element.__phenixHasPlayedWebRtc) {\n                    element = (new PhenixVideo(element, streamUri, false)).getElement();\n                } else {\n                    return attachUriStreamToElement(element, streamUri);\n                }\n\n                element.play();\n\n                return element;\n            };\n            reattachMediaStream = reattachStreamToElement;\n            getStats = function getPeerConnectionStats(pc, track, successCallback, errorCallback) {\n                pc.getStats(track).then(_.bind(handleGetStatsSuccess, this, pc, successCallback), errorCallback);\n            };\n\n            webrtcSupported = true;\n\n            break;\n        default:\n            log('Browser does not appear to be WebRTC-capable', browser);\n\n            break;\n        }\n    }\n\n    function navigatorGetUserMedia(constraints, successCallback, errorCallback) {\n        var onSuccess = _.bind(handleGetUserMediaSuccess, this, constraints, successCallback, errorCallback);\n\n        navigator.getUserMedia(constraints, onSuccess, errorCallback);\n    }\n\n    function handleGetUserMediaSuccess(constraints, successCallback, errorCallback, stream) {\n        setTimeout(function() {\n            var tracks = stream.getTracks();\n\n            for (var i = 0; i < tracks.length; i++) {\n                var track = tracks[i];\n\n                track.onended = function(event) {\n                    log(event.timeStamp, 'Track', track.id, track.label, 'ended');\n                };\n\n                log('Track', track.id, track.label, tracks[i].kind, 'readyState=', tracks[i].readyState);\n\n                if (track.readyState === 'ended') {\n                    return handleGetUserMediaUnavailable('User media not available', errorCallback, tracks);\n                }\n            }\n\n            var requestedTrackCount = (constraints.audio ? 1 : 0) + (constraints.video ? 1 : 0);\n\n            // Edge sometimes only gets a subset of tracks requested\n            if (tracks.length !== requestedTrackCount) {\n                return handleGetUserMediaUnavailable('Unable to get all requested user media.', errorCallback, tracks);\n            }\n\n            successCallback(stream);\n        }, 100);\n    }\n\n    function handleGetUserMediaUnavailable(message, errorCallback, tracks) {\n        try {\n            var error = new Error(message);\n\n            error.code = 'unavailable';\n\n            errorCallback(error);\n        } finally {\n            stopAllTracks(tracks);\n        }\n    }\n\n    function stopAllTracks(tracks) {\n        for (var j = 0; j < tracks.length; j++) {\n            tracks[j].stop();\n        }\n    }\n\n    function navigatorMediaDevicesEnumerateDevicesByTypeWrapper(type, callback) {\n        if (type !== 'input' && type !== 'output') {\n            throw new Error('Unsupported device type ' + type);\n        }\n\n        navigator.mediaDevices.enumerateDevices().then(function(devices) {\n            var sources = [];\n\n            devices.forEach(function(device) {\n                if (device.kind === 'audio' + type) {\n                    sources.push({\n                        kind: 'audio',\n                        id: device.deviceId,\n                        label: device.label\n                    });\n                } else if (device.kind === 'video' + type) {\n                    sources.push({\n                        kind: 'video',\n                        id: device.deviceId,\n                        label: device.label\n                    });\n                }\n            });\n\n            callback(sources);\n        });\n    }\n\n    function attachStreamToElement(element, stream) {\n        if (typeof element.srcObject !== 'undefined') {\n            element.srcObject = stream;\n        } else if (typeof element.mozSrcObject !== 'undefined') {\n            element.mozSrcObject = stream;\n        } else if (typeof element.src !== 'undefined') {\n            element.src = URL.createObjectURL(stream);\n        } else {\n            log('Error attaching stream to element.');\n        }\n\n        element.play();\n\n        return element;\n    }\n\n    function attachUriStreamToElement(element, streamUri) {\n        element.src = streamUri;\n\n        element.play();\n\n        return element;\n    }\n\n    function reattachStreamToElement(to, from) {\n        to.src = from.src;\n\n        return to;\n    }\n\n    function handleGetStatsSuccess(pc, successCallback, stats) {\n        successCallback(normalizePeerConnectionStats(pc, stats));\n    }\n\n    function normalizePeerConnectionStats(pc, stats) {\n        // TODO (DCY) add vendor specific logic to map all stats to same similar object\n        switch (browser.browser) {\n        case 'Edge':\n            stats.forEach(function(stat) {\n                stat.mediaType = getMediaTypeByCodecFromSdp(pc, stat.codecId);\n                stat.bytesSent = estimateBytesFromNumberOfPacketsAndMediaType(stat.packetsSent, stat.mediaType);\n                stat.bytesReceived = estimateBytesFromNumberOfPacketsAndMediaType(stat.packetsReceived, stat.mediaType);\n            });\n\n            break;\n        case 'Safari':\n            stats.forEach(function(stat) {\n                if (_.includes(stat.id.toLowerCase(), 'audio') && _.includes(stat.id.toLowerCase(), 'rtp')) {\n                    stat.mediaType = 'audio';\n                }\n\n                if (_.includes(stat.id.toLowerCase(), 'video') && _.includes(stat.id.toLowerCase(), 'rtp')) {\n                    stat.mediaType = 'video';\n                }\n            });\n\n            break;\n        default:\n            break;\n        }\n\n        return stats;\n    }\n\n    function getMediaTypeByCodecFromSdp(peerConnection, codec) {\n        if (!codec) {\n            return;\n        }\n\n        var mediaType;\n\n        findInSdpSections(peerConnection, function(section) {\n            if (_.startsWith(section, 'video') && _.includes(section.toLowerCase(), codec.toLowerCase())) {\n                mediaType = 'video';\n            }\n\n            if (_.startsWith(section, 'audio') && _.includes(section.toLowerCase(), codec.toLowerCase())) {\n                mediaType = 'audio';\n            }\n        });\n\n        return mediaType;\n    }\n\n    function findInSdpSections(peerConnection, callback) {\n        var localSections = peerConnection.localDescription.sdp.split('m=');\n        var remoteSections = peerConnection.remoteDescription.sdp.split('m=');\n\n        if (localSections.length !== remoteSections.length) {\n            return false;\n        }\n\n        return _.findIndex(localSections, function(section, index) {\n            return callback(section, index, remoteSections);\n        });\n    }\n\n    function estimateBytesFromNumberOfPacketsAndMediaType(packets, mediaType) {\n        var packetsReceivedNum = parseInt(packets) || 0;\n\n        if (mediaType === 'audio') {\n            return packetsReceivedNum * 100;\n        }\n\n        if (mediaType === 'video') {\n            return packetsReceivedNum * 1080;\n        }\n    }\n\n    shimRTC();\n\n    var adapter = {\n        RTCPeerConnection: RTCPeerConnection,\n        RTCSessionDescription: RTCSessionDescription,\n        RTCIceCandidate: RTCIceCandidate,\n        getSources: getSources,\n        getDestinations: getDestinations,\n        getUserMedia: getUserMedia,\n        getStats: getStats,\n        attachMediaStream: attachMediaStream,\n        attachUriStream: attachUriStream || attachUriStreamToElement,\n        reattachMediaStream: reattachMediaStream,\n        webrtcSupported: webrtcSupported\n    };\n\n    adapter.exportGlobal = function() {\n        window.RTCPeerConnection = adapter.RTCPeerConnection;\n        window.RTCSessionDescription = adapter.RTCSessionDescription;\n        window.RTCIceCandidate = adapter.RTCIceCandidate;\n    };\n\n    return adapter;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./rtc/WebRTC.js\n// module id = 21\n// module chunks = 0"],"sourceRoot":""}